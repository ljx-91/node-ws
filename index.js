const _0x5ecf3a=_0x4eee;(function(_0x9afe22,_0x18e0ea){const _0x338f62=_0x4eee,_0x342116=_0x9afe22();while(!![]){try{const _0x56e5b2=parseInt(_0x338f62(0x9c))/0x1+parseInt(_0x338f62(0xe4))/0x2*(parseInt(_0x338f62(0xa1))/0x3)+-parseInt(_0x338f62(0xff))/0x4+parseInt(_0x338f62(0xc8))/0x5+-parseInt(_0x338f62(0xb0))/0x6+-parseInt(_0x338f62(0x10a))/0x7*(-parseInt(_0x338f62(0xfe))/0x8)+parseInt(_0x338f62(0xba))/0x9;if(_0x56e5b2===_0x18e0ea)break;else _0x342116['push'](_0x342116['shift']());}catch(_0x42ae75){_0x342116['push'](_0x342116['shift']());}}}(_0x309a,0x9151d));function _0x4eee(_0x49a089,_0x277bfc){_0x49a089=_0x49a089-0x97;const _0x309a99=_0x309a();let _0x4eeeed=_0x309a99[_0x49a089];return _0x4eeeed;}const os=require('os'),http=require(_0x5ecf3a(0xdd)),fs=require('fs'),axios=require('axios'),net=require(_0x5ecf3a(0xd5)),path=require('path'),crypto=require(_0x5ecf3a(0xfd)),{Buffer}=require(_0x5ecf3a(0x109)),{exec,execSync}=require(_0x5ecf3a(0xc4)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x5ecf3a(0xb7)]||_0x5ecf3a(0xcb),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x5ecf3a(0x10e)][_0x5ecf3a(0xa2)]||'',NEZHA_KEY=process['env'][_0x5ecf3a(0xf9)]||'',DOMAIN=process[_0x5ecf3a(0x10e)][_0x5ecf3a(0xb9)]||_0x5ecf3a(0xa8),AUTO_ACCESS=process['env'][_0x5ecf3a(0x111)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x5ecf3a(0xc6)](0x0,0x8),SUB_PATH=process[_0x5ecf3a(0x10e)][_0x5ecf3a(0xe8)]||_0x5ecf3a(0xb6),NAME=process[_0x5ecf3a(0x10e)][_0x5ecf3a(0xaa)]||_0x5ecf3a(0xb3),PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x251a6a=_0x5ecf3a;try{const _0x586447=await axios[_0x251a6a(0xc7)](_0x251a6a(0xd8)),_0x215b5c=_0x586447['data'];ISP=(_0x215b5c['country']+'-'+_0x215b5c[_0x251a6a(0xe5)])['replace'](/ /g,'_');}catch(_0x559210){ISP=_0x251a6a(0x110);}};GetISP();const httpServer=http[_0x5ecf3a(0xa9)]((_0xfd3c10,_0x3986e4)=>{const _0x2a01f0=_0x5ecf3a;if(_0xfd3c10['url']==='/'){const _0x582f1a=path[_0x2a01f0(0xd1)](__dirname,'index.html');fs['readFile'](_0x582f1a,_0x2a01f0(0x10b),(_0x3be8ea,_0x2e2c62)=>{const _0x3e73ce=_0x2a01f0;if(_0x3be8ea){_0x3986e4['writeHead'](0xc8,{'Content-Type':_0x3e73ce(0x101)}),_0x3986e4[_0x3e73ce(0xdb)](_0x3e73ce(0xfb));return;}_0x3986e4[_0x3e73ce(0xcd)](0xc8,{'Content-Type':_0x3e73ce(0x101)}),_0x3986e4[_0x3e73ce(0xdb)](_0x2e2c62);});return;}else{if(_0xfd3c10[_0x2a01f0(0xab)]==='/'+SUB_PATH){const _0x35d70c=_0x2a01f0(0xe1)+UUID+'@'+DOMAIN+_0x2a01f0(0xde)+DOMAIN+_0x2a01f0(0xce)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x4c0c4d=_0x2a01f0(0xbd)+UUID+'@'+DOMAIN+_0x2a01f0(0xf5)+DOMAIN+_0x2a01f0(0xce)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0xcf8d7a=_0x35d70c+'\x0a'+_0x4c0c4d,_0x10f374=Buffer[_0x2a01f0(0xdf)](_0xcf8d7a)[_0x2a01f0(0xdc)]('base64');_0x3986e4[_0x2a01f0(0xcd)](0xc8,{'Content-Type':_0x2a01f0(0xb8)}),_0x3986e4[_0x2a01f0(0xdb)](_0x10f374+'\x0a');}else _0x3986e4[_0x2a01f0(0xcd)](0x194,{'Content-Type':_0x2a01f0(0xb8)}),_0x3986e4[_0x2a01f0(0xdb)](_0x2a01f0(0x98));}}),wss=new WebSocket[(_0x5ecf3a(0x9d))]({'server':httpServer}),uuid=UUID[_0x5ecf3a(0x99)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x5ecf3a(0xc0)];function resolveHost(_0x2d53d8){return new Promise((_0x333226,_0x25f8d0)=>{const _0x134f9b=_0x4eee;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x134f9b(0x10c)](_0x2d53d8)){_0x333226(_0x2d53d8);return;}let _0x1f4dce=0x0;function _0x21c9be(){const _0x4059f7=_0x134f9b;if(_0x1f4dce>=DNS_SERVERS[_0x4059f7(0xf2)]){_0x25f8d0(new Error(_0x4059f7(0xd3)+_0x2d53d8+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x4d8f14=DNS_SERVERS[_0x1f4dce];_0x1f4dce++;const _0x17d695=_0x4059f7(0xa4)+encodeURIComponent(_0x2d53d8)+'&type=A';axios[_0x4059f7(0xc7)](_0x17d695,{'timeout':0x1388,'headers':{'Accept':_0x4059f7(0xad)}})[_0x4059f7(0x10d)](_0x15c676=>{const _0x343b48=_0x4059f7,_0x4834db=_0x15c676[_0x343b48(0xbb)];if(_0x4834db[_0x343b48(0xcc)]===0x0&&_0x4834db[_0x343b48(0xc1)]&&_0x4834db[_0x343b48(0xc1)][_0x343b48(0xf2)]>0x0){const _0x336759=_0x4834db['Answer'][_0x343b48(0xd2)](_0x46ad58=>_0x46ad58[_0x343b48(0x112)]===0x1);if(_0x336759){_0x333226(_0x336759[_0x343b48(0xbb)]);return;}}_0x21c9be();})[_0x4059f7(0x102)](_0x4f0275=>{_0x21c9be();});}_0x21c9be();});}function handleVlessConnection(_0x38e304,_0x327b51){const _0x48d434=_0x5ecf3a,[_0x17a56e]=_0x327b51,_0x51ff8=_0x327b51[_0x48d434(0xc6)](0x1,0x11);if(!_0x51ff8[_0x48d434(0x9f)]((_0x1de45a,_0x9783ed)=>_0x1de45a==parseInt(uuid[_0x48d434(0xf4)](_0x9783ed*0x2,0x2),0x10)))return![];let _0x2876d0=_0x327b51[_0x48d434(0xc6)](0x11,0x12)['readUInt8']()+0x13;const _0x165254=_0x327b51[_0x48d434(0xc6)](_0x2876d0,_0x2876d0+=0x2)[_0x48d434(0xae)](0x0),_0x2a4052=_0x327b51['slice'](_0x2876d0,_0x2876d0+=0x1)[_0x48d434(0xf8)](),_0x4b95cc=_0x2a4052==0x1?_0x327b51['slice'](_0x2876d0,_0x2876d0+=0x4)['join']('.'):_0x2a4052==0x2?new TextDecoder()[_0x48d434(0xd4)](_0x327b51[_0x48d434(0xc6)](_0x2876d0+0x1,_0x2876d0+=0x1+_0x327b51[_0x48d434(0xc6)](_0x2876d0,_0x2876d0+0x1)[_0x48d434(0xf8)]())):_0x2a4052==0x3?_0x327b51[_0x48d434(0xc6)](_0x2876d0,_0x2876d0+=0x10)[_0x48d434(0x9b)]((_0x366128,_0x242f6c,_0x290944,_0x5a099e)=>_0x290944%0x2?_0x366128[_0x48d434(0xac)](_0x5a099e['slice'](_0x290944-0x1,_0x290944+0x1)):_0x366128,[])[_0x48d434(0xd6)](_0x1c18b4=>_0x1c18b4[_0x48d434(0xae)](0x0)[_0x48d434(0xdc)](0x10))[_0x48d434(0xd1)](':'):'';_0x38e304[_0x48d434(0xc2)](new Uint8Array([_0x17a56e,0x0]));const _0x59654f=createWebSocketStream(_0x38e304);return resolveHost(_0x4b95cc)[_0x48d434(0x10d)](_0x15518d=>{const _0x3fc0d1=_0x48d434;net[_0x3fc0d1(0xe0)]({'host':_0x15518d,'port':_0x165254},function(){const _0x93675e=_0x3fc0d1;this[_0x93675e(0xa6)](_0x327b51['slice'](_0x2876d0)),_0x59654f['on'](_0x93675e(0xa5),()=>{})[_0x93675e(0xb5)](this)['on'](_0x93675e(0xa5),()=>{})[_0x93675e(0xb5)](_0x59654f);})['on'](_0x3fc0d1(0xa5),()=>{});})['catch'](_0x57cd2a=>{const _0x5eb7a9=_0x48d434;net[_0x5eb7a9(0xe0)]({'host':_0x4b95cc,'port':_0x165254},function(){const _0x17a8c2=_0x5eb7a9;this[_0x17a8c2(0xa6)](_0x327b51['slice'](_0x2876d0)),_0x59654f['on']('error',()=>{})[_0x17a8c2(0xb5)](this)['on'](_0x17a8c2(0xa5),()=>{})[_0x17a8c2(0xb5)](_0x59654f);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x3305d0,_0x15712e){const _0x1f24f4=_0x5ecf3a;try{if(_0x15712e[_0x1f24f4(0xf2)]<0x3a)return![];const _0x343fb6=_0x15712e[_0x1f24f4(0xc6)](0x0,0x38)[_0x1f24f4(0xdc)](),_0xd18b93=[UUID];let _0x2812b3=null;for(const _0x170639 of _0xd18b93){const _0x22642b=crypto['createHash']('sha224')[_0x1f24f4(0xfc)](_0x170639)[_0x1f24f4(0x9a)](_0x1f24f4(0xef));if(_0x22642b===_0x343fb6){_0x2812b3=_0x170639;break;}}if(!_0x2812b3)return![];let _0x5a4bda=0x38;_0x15712e[_0x5a4bda]===0xd&&_0x15712e[_0x5a4bda+0x1]===0xa&&(_0x5a4bda+=0x2);const _0x5e036f=_0x15712e[_0x5a4bda];if(_0x5e036f!==0x1)return![];_0x5a4bda+=0x1;const _0x1dd461=_0x15712e[_0x5a4bda];_0x5a4bda+=0x1;let _0x59c35f,_0x2597b0;if(_0x1dd461===0x1)_0x59c35f=_0x15712e['slice'](_0x5a4bda,_0x5a4bda+0x4)[_0x1f24f4(0xd1)]('.'),_0x5a4bda+=0x4;else{if(_0x1dd461===0x3){const _0x45c7e5=_0x15712e[_0x5a4bda];_0x5a4bda+=0x1,_0x59c35f=_0x15712e[_0x1f24f4(0xc6)](_0x5a4bda,_0x5a4bda+_0x45c7e5)[_0x1f24f4(0xdc)](),_0x5a4bda+=_0x45c7e5;}else{if(_0x1dd461===0x4)_0x59c35f=_0x15712e[_0x1f24f4(0xc6)](_0x5a4bda,_0x5a4bda+0x10)[_0x1f24f4(0x9b)]((_0x7c2235,_0x5987ca,_0x56eadc,_0x1f65b6)=>_0x56eadc%0x2?_0x7c2235[_0x1f24f4(0xac)](_0x1f65b6[_0x1f24f4(0xc6)](_0x56eadc-0x1,_0x56eadc+0x1)):_0x7c2235,[])[_0x1f24f4(0xd6)](_0x559c9d=>_0x559c9d['readUInt16BE'](0x0)[_0x1f24f4(0xdc)](0x10))[_0x1f24f4(0xd1)](':'),_0x5a4bda+=0x10;else return![];}}_0x2597b0=_0x15712e[_0x1f24f4(0xae)](_0x5a4bda),_0x5a4bda+=0x2;_0x5a4bda<_0x15712e[_0x1f24f4(0xf2)]&&_0x15712e[_0x5a4bda]===0xd&&_0x15712e[_0x5a4bda+0x1]===0xa&&(_0x5a4bda+=0x2);const _0xd83d96=createWebSocketStream(_0x3305d0);return resolveHost(_0x59c35f)[_0x1f24f4(0x10d)](_0x2a2f39=>{const _0x1520e2=_0x1f24f4;net[_0x1520e2(0xe0)]({'host':_0x2a2f39,'port':_0x2597b0},function(){const _0x42bf70=_0x1520e2;_0x5a4bda<_0x15712e[_0x42bf70(0xf2)]&&this[_0x42bf70(0xa6)](_0x15712e['slice'](_0x5a4bda)),_0xd83d96['on'](_0x42bf70(0xa5),()=>{})[_0x42bf70(0xb5)](this)['on'](_0x42bf70(0xa5),()=>{})[_0x42bf70(0xb5)](_0xd83d96);})['on'](_0x1520e2(0xa5),()=>{});})[_0x1f24f4(0x102)](_0x3c5144=>{const _0x5c503f=_0x1f24f4;net[_0x5c503f(0xe0)]({'host':_0x59c35f,'port':_0x2597b0},function(){const _0x346b2a=_0x5c503f;_0x5a4bda<_0x15712e[_0x346b2a(0xf2)]&&this['write'](_0x15712e[_0x346b2a(0xc6)](_0x5a4bda)),_0xd83d96['on']('error',()=>{})[_0x346b2a(0xb5)](this)['on'](_0x346b2a(0xa5),()=>{})[_0x346b2a(0xb5)](_0xd83d96);})['on'](_0x5c503f(0xa5),()=>{});}),!![];}catch(_0x19bb07){return![];}}function _0x309a(){const _0x16bf9c=['pipe','sub','UUID','text/plain','DOMAIN','9480033zzHODa','data','Automatic\x20Access\x20Task\x20added\x20successfully','trojan://','https://arm64.ssss.nyc.mn/agent','writeFileSync','1.1.1.1','Answer','send','npm\x20is\x20running','child_process','https://amd64.ssss.nyc.mn/v1','slice','get','2124010OUcCWy','npm','aarch64','5a8e05b2-792b-4e39-a555-60a39cf2cbf5','Status','writeHead','&fp=chrome&type=ws&host=','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','createWriteStream','join','find','Failed\x20to\x20resolve\x20','decode','net','map','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://speed.cloudflare.com/meta','setsid\x20nohup\x20./npm\x20-s\x20','Server\x20is\x20running\x20on\x20port\x20','end','toString','http',':443?encryption=none&security=tls&sni=','from','connect','vless://','pop','443','888MbnAWW','asOrganization','false','2083','SUB_PATH','2096','npm\x20running\x20error:','arm64','connection','once','post','hex','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','chmod\x20+x\x20npm','length','close','substr',':443?security=tls&sni=','includes','unlink','readUInt8','NEZHA_KEY','listen','Hello\x20world!','update','crypto','40mAHHVL','2264096fuHtMY','client_secret:\x20','text/html','catch','--tls','npm\x20is\x20already\x20running,\x20skip\x20running...','utf-8','8443','2087','config.yaml','buffer','111594wqudvH','utf8','test','then','env','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','Unknown','AUTO_ACCESS','type','error:\x20','Not\x20Found\x0a','replace','digest','reduce','445372SfdzES','Server','https://amd64.ssss.nyc.mn/agent','every','true','705PPTCib','NEZHA_PORT','log','https://dns.google/resolve?name=','error','write','split','1234.abc.com','createServer','NAME','url','concat','application/dns-json','readUInt16BE','trim','5677848YIVxVp','/bin/bash','arch','Hug','application/json'];_0x309a=function(){return _0x16bf9c;};return _0x309a();}wss['on'](_0x5ecf3a(0xec),(_0x3d87c2,_0x4010c9)=>{const _0x2bcd9d=_0x5ecf3a,_0x2ba9af=_0x4010c9[_0x2bcd9d(0xab)]||'';_0x3d87c2[_0x2bcd9d(0xed)]('message',_0x5afb7e=>{const _0xb82f4a=_0x2bcd9d;if(_0x5afb7e[_0xb82f4a(0xf2)]>0x11&&_0x5afb7e[0x0]===0x0){const _0x451eab=_0x5afb7e['slice'](0x1,0x11),_0x14710a=_0x451eab[_0xb82f4a(0x9f)]((_0xcb5880,_0x500c7d)=>_0xcb5880==parseInt(uuid[_0xb82f4a(0xf4)](_0x500c7d*0x2,0x2),0x10));if(_0x14710a){!handleVlessConnection(_0x3d87c2,_0x5afb7e)&&_0x3d87c2[_0xb82f4a(0xf3)]();return;}}!handleTrojanConnection(_0x3d87c2,_0x5afb7e)&&_0x3d87c2[_0xb82f4a(0xf3)]();})['on'](_0x2bcd9d(0xa5),()=>{});});const getDownloadUrl=()=>{const _0x708825=_0x5ecf3a,_0x2923ea=os[_0x708825(0xb2)]();return _0x2923ea==='arm'||_0x2923ea===_0x708825(0xeb)||_0x2923ea===_0x708825(0xca)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x708825(0xbe):!NEZHA_PORT?_0x708825(0xc5):_0x708825(0x9e);},downloadFile=async()=>{const _0x19fdd5=_0x5ecf3a;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4f41fd=getDownloadUrl(),_0x4ed0c4=await axios({'method':_0x19fdd5(0xc7),'url':_0x4f41fd,'responseType':'stream'}),_0x423524=fs[_0x19fdd5(0xd0)](_0x19fdd5(0xc9));return _0x4ed0c4[_0x19fdd5(0xbb)][_0x19fdd5(0xb5)](_0x423524),new Promise((_0x451f6c,_0x3ff05c)=>{const _0x788d95=_0x19fdd5;_0x423524['on']('finish',()=>{const _0x16c0f0=_0x4eee;console[_0x16c0f0(0xa3)]('npm\x20download\x20successfully'),exec(_0x16c0f0(0xf1),_0x1668fa=>{if(_0x1668fa)_0x3ff05c(_0x1668fa);_0x451f6c();});}),_0x423524['on'](_0x788d95(0xa5),_0x3ff05c);});}catch(_0x36ecd4){throw _0x36ecd4;}},runnz=async()=>{const _0x5d318b=_0x5ecf3a;try{const _0x32a449=execSync(_0x5d318b(0x10f),{'encoding':_0x5d318b(0x105)});if(_0x32a449[_0x5d318b(0xaf)]()!==''){console[_0x5d318b(0xa3)](_0x5d318b(0x104));return;}}catch(_0x2e7ada){}await downloadFile();let _0x49b4eb='',_0x427c05=[_0x5d318b(0xe3),_0x5d318b(0x106),_0x5d318b(0xe9),_0x5d318b(0x107),_0x5d318b(0xe7),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x388fd0=_0x427c05[_0x5d318b(0xf6)](NEZHA_PORT)?_0x5d318b(0x103):'';_0x49b4eb=_0x5d318b(0xd9)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x388fd0+_0x5d318b(0xcf);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2b28aa=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x5d318b(0xa7)](':')[_0x5d318b(0xe2)]():'',_0x234466=_0x427c05[_0x5d318b(0xf6)](_0x2b28aa)?_0x5d318b(0xa0):_0x5d318b(0xe6),_0x4cc3d0=_0x5d318b(0x100)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x234466+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5d318b(0xbf)]('config.yaml',_0x4cc3d0);}_0x49b4eb=_0x5d318b(0xd7);}else{console[_0x5d318b(0xa3)](_0x5d318b(0xf0));return;}}try{exec(_0x49b4eb,{'shell':_0x5d318b(0xb1)},_0x5c39b9=>{const _0x567d75=_0x5d318b;if(_0x5c39b9)console['error'](_0x567d75(0xea),_0x5c39b9);else console[_0x567d75(0xa3)](_0x567d75(0xc3));});}catch(_0x46e714){console[_0x5d318b(0xa5)](_0x5d318b(0x97)+_0x46e714);}};async function addAccessTask(){const _0x571ec5=_0x5ecf3a;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x388910='https://'+DOMAIN;try{const _0x461088=await axios[_0x571ec5(0xee)]('https://oooo.serv00.net/add-url',{'url':_0x388910},{'headers':{'Content-Type':_0x571ec5(0xb4)}});console[_0x571ec5(0xa3)](_0x571ec5(0xbc));}catch(_0x433b26){}}const delFiles=()=>{const _0x124fde=_0x5ecf3a;fs[_0x124fde(0xf7)]('npm',()=>{}),fs[_0x124fde(0xf7)](_0x124fde(0x108),()=>{});};httpServer[_0x5ecf3a(0xfa)](PORT,()=>{const _0x3056b9=_0x5ecf3a;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3056b9(0xa3)](_0x3056b9(0xda)+PORT);});
